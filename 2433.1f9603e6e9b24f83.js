"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2433],{2433:(J,g,d)=>{d.r(g),d.d(g,{LoginPageModule:()=>x});var p=d(6814),u=d(95),a=d(1509),h=d(3044),t=d(6689);const f=new t.OlP("JWT_OPTIONS");let m=(()=>{class r{constructor(e=null){this.tokenGetter=e&&e.tokenGetter||function(){}}urlBase64Decode(e){let o=e.replace(/-/g,"+").replace(/_/g,"/");switch(o.length%4){case 0:break;case 2:o+="==";break;case 3:o+="=";break;default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(o)}b64decode(e){let n="";if((e=String(e).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let l,c,i=0,M=0;c=e.charAt(M++);~c&&(l=i%4?64*l+c:c,i++%4)?n+=String.fromCharCode(255&l>>(-2*i&6)):0)c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(c);return n}b64DecodeUnicode(e){return decodeURIComponent(Array.prototype.map.call(this.b64decode(e),o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(e=this.tokenGetter()){return e instanceof Promise?e.then(o=>this._decodeToken(o)):this._decodeToken(e)}_decodeToken(e){if(!e||""===e)return null;const o=e.split(".");if(3!==o.length)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");const n=this.urlBase64Decode(o[1]);if(!n)throw new Error("Cannot decode the token.");return JSON.parse(n)}getTokenExpirationDate(e=this.tokenGetter()){return e instanceof Promise?e.then(o=>this._getTokenExpirationDate(o)):this._getTokenExpirationDate(e)}_getTokenExpirationDate(e){let o;if(o=this.decodeToken(e),!o||!o.hasOwnProperty("exp"))return null;const n=new Date(0);return n.setUTCSeconds(o.exp),n}isTokenExpired(e=this.tokenGetter(),o){return e instanceof Promise?e.then(n=>this._isTokenExpired(n,o)):this._isTokenExpired(e,o)}_isTokenExpired(e,o){if(!e||""===e)return!0;const n=this.getTokenExpirationDate(e);return o=o||0,null!==n&&!(n.valueOf()>(new Date).valueOf()+1e3*o)}getAuthScheme(e,o){return"function"==typeof e?e(o):e}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(f))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();var w=d(209),T=d(9862);const k=[{path:"",component:(()=>{var r;class s{constructor(o,n,i){this.router=o,this.dataService=n,this.http=i,this.email="",this.password="",this.jwtHelper=new m}ngOnInit(){}login(){this.http.post("https://localhost:7013/api/Users/login",{email:this.email,password:this.password,role:"Admin"}).subscribe(n=>{if(localStorage.setItem("token",n.token),console.log("Server Response:",n),n.token){const i=this.jwtHelper.decodeToken(n.token);console.log("Decoded Token:",i),this.jwtHelper.isTokenExpired(n.token)?console.error("Token is expired"):(console.log("Token is valid and not expired"),this.redirectToDashboard(i.role))}else console.error("Invalid token")},n=>{console.error("Login failed",n)})}redirectToDashboard(o){"Admin"===o?this.router.navigate(["/view-wods"]):"Client"===o?this.router.navigate(["/wodcat"]):console.error("Invalid login details")}}return(r=s).\u0275fac=function(o){return new(o||r)(t.Y36(h.F0),t.Y36(w.i),t.Y36(T.eN))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-login"]],decls:36,vars:3,consts:[[3,"fullscreen"],["collapse","condense"],["size","large"],[2,"height","100%"],["justify-content-center","","align-items-center","",2,"height","100%"],[2,"width","100%"],[1,"container"],[1,"row"],[1,"logocon"],["src","assets/imgs/WODBOX ICON@2x.png","id","logo"],[2,"text-align","center","color","#b27600","font-size","xxx-large"],["type","email","name","email","placeholder","Username","type","email","required","",2,"font-size","x-large","text-align","center",3,"ngModel","ngModelChange"],["type","password","name","password","placeholder","Password","type","password","required","",2,"font-size","x-large","text-align","center","color","#b27600",3,"ngModel","ngModelChange"],[2,"text-align","center"],["expand","full",2,"font-size","xxx-large","margin-left","auto","margin-right","auto","border-radius","10px","background-color","#b27600","width","90%","height","70px",3,"click"],[2,"text-align","center","font-size","large"],["href","/signup",2,"padding-left","2%","color","#b27600"],["href","",2,"padding-left","2%","color","#b27600"]],template:function(o,n){1&o&&(t.TgZ(0,"ion-content",0)(1,"ion-header",1)(2,"ion-toolbar")(3,"ion-title",2),t._uU(4,"login"),t.qZA()()(),t.TgZ(5,"ion-grid",3)(6,"ion-row",4)(7,"ion-card",5)(8,"div",6),t._UZ(9,"pre"),t.TgZ(10,"div",7)(11,"div",8),t._UZ(12,"ion-img",9),t.qZA()(),t.TgZ(13,"div",7)(14,"h1",10),t._uU(15,"WODBOX"),t.qZA()(),t._UZ(16,"pre"),t.TgZ(17,"div")(18,"ion-input",11),t.NdJ("ngModelChange",function(l){return n.email=l}),t.qZA()(),t._UZ(19,"pre"),t.TgZ(20,"div")(21,"ion-input",12),t.NdJ("ngModelChange",function(l){return n.password=l}),t.qZA()(),t._UZ(22,"pre"),t.TgZ(23,"div",13)(24,"button",14),t.NdJ("click",function(){return n.login()}),t._uU(25,"Login"),t.qZA()(),t._UZ(26,"br"),t.TgZ(27,"div",15),t._uU(28," Dont have an accont? "),t.TgZ(29,"a",16),t._uU(30,"Create account"),t.qZA()(),t._UZ(31,"br"),t.TgZ(32,"div",15),t._uU(33," Forgot your password?"),t.TgZ(34,"a",17),t._uU(35,"YES"),t.qZA()()()()()()()),2&o&&(t.Q6J("fullscreen",!0),t.xp6(18),t.Q6J("ngModel",n.email),t.xp6(3),t.Q6J("ngModel",n.password))},dependencies:[u.JJ,u.Q7,u.On,a.PM,a.W2,a.jY,a.Gu,a.Xz,a.pK,a.Nd,a.wd,a.sr,a.j9],styles:[".logocon[_ngcontent-%COMP%]{background-color:#f0f8ff;width:80%;height:auto;border-radius:20%;margin-left:auto;margin-right:auto;border-color:#b27600;border-style:solid;border-width:4px}#logo[_ngcontent-%COMP%]{width:80%;height:40%;margin:7% auto}"]}),s})()}];let v=(()=>{var r;class s{}return(r=s).\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[h.Bz.forChild(k),h.Bz]}),s})(),x=(()=>{var r;class s{}return(r=s).\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,u.u5,a.Pc,v]}),s})()}}]);